# Oglavlenie
1. [Программна работа с документами, ПВХ](#1)
	+ [Работа с документами](#1-1)
        + [Найти заказ поставщику по номеру](#1-1-1)
        + [Создать заказ поставщик](#1-1-2)
        + [Изменить заказ поставщику](#1-1-3)
        + [Удалить товар из заказа](#1-1-4)
        + [Отменить проведение документа](#1-1-5)
        + [Провести документы за месяц](#1-1-6)
        + [Создать поступление на основании заказа](#1-1-7)
        + [Определить сумму заказа](#1-1-8)
        + [Добавить товар в заказ поставщику](#1-1-9)
        + [Определить сумму заказа](#1-1-10)
    
    + [Программная работа с ПВХ](#1-2)
        + [Заполнить доп. реквизит номенклатуры](#1-2-1)
        + [Получить значение доп. реквизита](#1-2-2)
        + [Все доп. реквизиты номенклатуры](#1-2-3) 

1. [Прогрммная работа с РегистрамиСведений и РегистрамиАНкоплений](#2)
	+ [Регистры сведений](#2-1)
        + [Заполнение производственного календаря](#2-1-1)
        + [Рабочий или выходной день](#2-1-2)
        + [Аналоги номенклатуры](#2-1-3)
        + [Самый дорогой товар](#2-1-4)
        + [Курс евро](#2-1-5)
        + [Размер оклада](#2-1-6)
        + [Найти номенклатуру по коду](#2-1-7)
        + [Определить сумму заказа](#2-1-8)
        + [Добавить штрихкод номенклатуры](#2-1-9)
        + [Прайс-Лист](#2-1-10)
    
    + [Работа с регистрами накоплений](#2-2)
        + [Цена на товар у поставщика](#2-2-1)
        + [Количество проданных единиц за месяц](#2-2-2)
        + [Продажи по контрагентам](#2-2-3)
		+ [Остатки денежных средств](#2-2-4)
        + [Остатки товаров на складе](#2-2-5)
	
3. [Прогрммная работа с РегистрамиСведений и РегистрамиАНкоплений](#3)
	+ [Регистры Бухгалтерии](#3-1)
        + [Остатки всех товаров](#3-1-1)
        + [Остатки конкретного товара](#3-1-2)
        + [Долги клиентов](#3-1-3)
        + [Долги поставщикам](#3-1-4)
        + [Продажи за период](#3-1-5)
    
    + [Работа с задачами и бизнес процессами](#3-2)
        + [Создать задачу](#3-2-1)
        + [Невыполненные задачи](#3-2-2)
		+ [Старт бизнес-процессов](#3-2-3)
	
	+ [Дополнительные задачи](#3-3)
		+ [Скопировать документ](#3-3-1)
        + [Изменить розничные цены](#3-3-2)



# 1 
# Программна работа с документами, ПВХ, планами счетов и планами видов расчета.
[Оглавление](#Oglavlenie)
# 1-1
# Работа с документами
 # 1-1-1 
 [Оглавление](#Oglavlenie)
# Найти заказ поставщику по номеру
[Оглавление](#Oglavlenie)
```
// Найдите заказ поставщику с номером "00000000180" и сообщите его дату, а также наименование поставщика.
// Если документа с таким номером нет в базе, нужно сообщить об этом пользователю.

ЗаказСсылка = Документы.ЗаказКлиента.НайтиПоНомеру("00000000180");

Если Не ЗаказСсылка.Пустая() Тогда
	Текст = СтрШаблон("Дата заказа: %1, Поставщик : %2", ЗаказСсылка.Дата, ЗаказСсылка.Контрагент);
Иначе 
	Текст = "Заказ не найден";
КонецЕсли;

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = Текст;
Сообщение.Сообщить();
```

# 1-1-2
# Создать заказ поставщику
[Оглавление](#Oglavlenie)
```
// Создайте документ "Заказ поставщику", заполнив его следующими данными:
// Дата: <текущая дата>
// Организация: Айрон Электроникс
// Валюта: RUB
// Контрагент: АктивТрейд, ООО
// Договор: № 1 от 05.08.2023
// Дата поступления: +7 дней от <текущая дата>
//
// **Товары**:
// 1. "Беззеркальный фотоаппарат Nikon Z5 Body", кол-во 5 шт., цена 35 000
// 2. "Зеркальный фотоаппарат Canon EOS 6D Mark II Body", кол-во 3 шт., цена 41 000
// Единицу измерения и ставку НДС в строках табличной части нужно заполнить значениями одноименных реквизитов номенклатуры
// Цена товара указана без НДС.

// Проведите документ и сообщите пользователю номер документа и его итоговую сумму

ДокОбъект = Документы.ЗаказПоставщику.СоздатьДокумент();

ДокОбъект.Дата = ТекущаяДата();
ДокОбъект.Организация = Справочники.Организации.ОсновнаяОрганизация;
ДокОбъект.Валюта  = Справочники.Валюты.НайтиПоКоду("643");
ДокОбъект.Контрагент = Справочники.Контрагенты.НайтиПоКоду("000000025");
ДокОбъект.Договор = Справочники.ДоговорыКонтрагентов.НайтиПоКоду("000000015");
ДокОбъект.ДатаПоступления = ТекущаяДата() + 7 *86400;

СтрокаТаблицы = ДокОбъект.Товары.Добавить();

СтрокаТаблицы.Номенклатура = Справочники.Номенклатура.НайтиПоНаименованию("Беззеркальный фотоаппарат Nikon Z5 Body") ;
СтрокаТаблицы.Количество = 5;
СтрокаТаблицы.Цена = 35000;
СтрокаТаблицы.СтавкаНДС = СтрокаТаблицы.Номенклатура.СтавкаНДС;
СтрокаТаблицы.ЕдиницаИзмерения = СтрокаТаблицы.Номенклатура.ЕдиницаИзмерения;

СтрокаТаблицы = ДокОбъект.Товары.Добавить();

СтрокаТаблицы.Номенклатура =Справочники.Номенклатура.НайтиПоНаименованию("Зеркальный фотоаппарат Canon EOS 6D Mark II Body") ;
СтрокаТаблицы.Количество = 3;
СтрокаТаблицы.Цена = 41000;
СтрокаТаблицы.СтавкаНДС = Справочники.СтавкиНДС.НДС20;
СтрокаТаблицы.ЕдиницаИзмерения = Справочники.КлассификаторЕдиницИзмерения.шт;

ДокОбъект.Записать();
```

# 1-1-3.
#  Изменить заказ поставщику
[Оглавление](#Oglavlenie)
```
// В заказе с номером "00000000185" нужно уменьшить цены всех товаров на 20% и пересчитать суммы.
// После изменения заказа нужно сообщить: 
// - итоговую сумму заказа ДО изменения цен
// - итоговую сумму заказа ПОСЛЕ изменения цен
// - сумму скидки (разницу между суммой заказа до и после изменения цен)
// Если документа с таким номером нет в базе, нужно сообщить об этом пользователю.
//
ЗаказСслыка = Документы.ЗаказПоставщику.НайтиПоНомеру("00000000185", '20231006');
Если НЕ ЗаказСслыка.Пустая() Тогда
	
	ЗаказОбъект = ЗаказСслыка.ПолучитьОбъект();
	
	Для Каждого СтрокаТаблицы ИЗ ЗаказОбъект.Товары Цикл
		
		СуммаВсегоДО =ЗаказОбъект.Товары.Итог("СуммаВсего");
		
		СтавкаНДС = СтрокаТаблицы.СтавкаНДС;
		СтрокаТаблицы.Цена = СтрокаТаблицы.Цена - СтрокаТаблицы.Цена * 0.2;
		СтрокаТаблицы.Сумма = СтрокаТаблицы.Количество * СтрокаТаблицы.Цена;
		СтрокаТаблицы.СуммаНДС = СтрокаТаблицы.Сумма * СтрокаТаблицы.СтавкаНДС.Ставка / 100;
		СтрокаТаблицы.СуммаВсего = СтрокаТаблицы.Сумма + СтрокаТаблицы.СуммаНДС;
		
	
	КонецЦикла;
	
	СуммаВсегоПосле = ЗаказОбъект.Товары.Итог("СуммаВсего");
	
	Скидка = СуммаВсегоДО - СуммаВсегоПосле;
	ЗаказОбъект.Записать(РежимЗаписиДокумента.Проведение);
	
	Текст = "Итоговая сумма до скидки = "+ СуммаВсегоДО + "
														|Итоговая сумма всего после скидки = " + СуммаВсегоПосле + "
														|Скидка составила = " + Скидка;	
Иначе
Текст = "Товар не найден"
	
КонецЕсли;

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = Текст;
Сообщение.Сообщить();


```

# 1-1-4 
# Удалить товар из заказа
[Оглавление](#Oglavlenie)
```
// Из заказа поставщику с номером "00000000182" нужно удалить строку с товаром "Электронная книга Amazon Kindle Paperwhite 2021"
// и затем провести документ.
// В результате нужно показать пользователю сообщение вида "Товар <Наименование> удален из заказа".
// Если документа с таким номером нет в базе, нужно сообщить об этом пользователю.


Номер = "00000000182";
Товар = "Электронная книга Amazon Kindle Paperwhite 2021";
ДатаДоговора = '20231001';

ТоварСсылка = Справочники.Номенклатура.НайтиПоНаименованию(Товар, истина);
ЗаказСсылка = Документы.ЗаказПоставщику.НайтиПоНомеру(Номер,ДатаДоговора);

Если НЕ ЗаказСсылка.Пустая() Тогда
	
	ЗаказОбъект = ЗаказСсылка.ПолучитьОбъект();
	
	ПараметрыОтбора = Новый Структура;
	ПараметрыОтбора.Вставить("Номенклатура", ТоварСсылка);
	
	Массив = ЗаказОбъект.Товары.НайтиСтроки(ПараметрыОтбора);
	
	Если Массив.Количество() <> 0 Тогда
		Для Каждого ЭлементМассива Из Массив Цикл
			ЗаказОбъект.Товары.Удалить(ЭлементМассива);
		КонецЦикла;
		Текст = СтрШаблон("Товар %1 удален из заказа", Товар);
		ЗаказОбъект.Записать(РежимЗаписиДокумента.Проведение);
	Иначе
		Текст = "Товаров нет в заказе";
		
		
	КонецЕсли;
	
Иначе
	Текст = "Такого заказа не существует";
	
	
КонецЕсли;


Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = Текст;
Сообщение.Сообщить();
```

# 1-1-5
# Отменить проведение документа
[Оглавление](#Oglavlenie)
```
// Нужно отменить проведение заказа поставщику с номером "00000000195".
// Если документа с таким номером нет в базе, нужно сообщить об этом пользователю.

ДокСсылка = Документы.ЗаказПоставщику.НайтиПоНомеру("00000000195", '20231023');
Если НЕ ДокСсылка.Пустая() Тогда
	ЗаказОбъект = ДокСсылка.ПолучитьОбъект();
	ЗаказОбъект.Записать(РежимЗаписиДокумента.ОтменаПроведения);
	
Иначе
	Текст = "Докумета с таким номером нету в базе";

КонецЕсли;

```
# 1-1-6 
# Провести документы за месяц
[Оглавление](#Oglavlenie)
```
// Нужно провести документы "Заказ поставщику" за период с 01.10.2023 по 31.10.2023.
// Примечание: документы, которые помечены на удаление, проводить не нужно.

ДатаНачала = '20231001';
ДатаКонца = '20231031';
Выборка = Документы.ЗаказПоставщику.Выбрать(ДатаНачала,ДатаКонца);
Пока Выборка.Следующий() Цикл
	Если НЕ Выборка.ПометкаУдаления Тогда
		ВыборкаОб = Выборка.ПолучитьОбъект();
		ВыборкаОб.Записать(РежимЗаписиДокумента.Проведение);
	КонецЕсли;
	
КонецЦикла;

```
# 1-1-7
# Создать поступление на основании заказа
[Оглавление](#Oglavlenie)
```
// На основании заказа поставщику с номером "00000000173" нужно создать и заполнить документ "Приходная накладная".
// Созданный документ нужно провести.
// Если заказа поставщику с таким номером нет в базе, нужно сообщить об этом пользователю.

ЗаказСсылка = Документы.ЗаказПоставщику.НайтиПоНомеру("00000000173", '20230901');
Если НЕ ЗаказСсылка.Пустая() Тогда
	
	НакладнаяОбъект = Документы.ПриходнаяНакладная.СоздатьДокумент();
	НакладнаяОбъект.Заполнить(ЗаказСсылка);
	НакладнаяОбъект.Дата = ТекущаяДата();
	
	НакладнаяОбъект.Записать(РежимЗаписиДокумента.Проведение);
	
	Текст = "На основании заказа поставщику создан документ : " + НакладнаяОбъект.Ссылка;
 Иначе
 Текст = "Документ не найден";
КонецЕсли;

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = Текст;
Сообщение.Сообщить();

```
# 1-1-8 
# Определить сумму заказа
[Оглавление](#Oglavlenie)
```
// Определите итоговую сумму заказа поставщику с номером "00000000120" и сообщите её пользователю.
// Если заказа поставщику с таким номером нет в базе, нужно сообщить об этом пользователю.

ЗаказССылка = Документы.ЗаказПоставщику.НайтиПоНомеру("00000000120", '20230501');

Если НЕ ЗаказССылка.Пустая() Тогда
	
		ИтогСумма = ЗаказССылка.Товары.Итог("СуммаВсего");
		
	Текст = ИтогСумма;
	
Иначе
Текст = "Такого заказа нет";		
КонецЕсли;

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = Текст;
Сообщение.Сообщить();
```
# 1-1-9 
# Добавить товар в заказ поставщику
[Оглавление](#Oglavlenie)
```
// В заказ поставщику с номером "00000000170" нужно добавить товар:
// "Телевизор Sony Bravia X90K XR-65X90K", кол-во 2 шт., цена 48 000 (цена без НДС)
// После изменения документ нужно провести.
// Сообщите пользователю итоговую сумму заказа и количество строк в табличной части.
// Если заказа поставщику с таким номером нет в базе, нужно сообщить об этом пользователю.

Номер = "00000000170";
Товар = "Телевизор Sony Bravia X90K XR-65X90K";
КолВо = 2;
ЦенаБезНДС = 48000;



ЗаказСсылка = Документы.ЗаказПоставщику.НайтиПоНомеру(Номер, '20230901');
ТоварСсылка = Справочники.Номенклатура.НайтиПоНаименованию(Товар);
СтавкаНДС = Справочники.СтавкиНДС.НДС20;

Если НЕ ЗаказСсылка.Пустая() Тогда 
	ЗаказОбъект = ЗаказСсылка.ПолучитьОбъект();
	
	СтрокаТаблицы = ЗаказОбъект.Товары.Добавить();
	СтрокаТаблицы.Номенклатура = ТоварСсылка;
	СтрокаТаблицы.Количество = КолВо;
	СтрокаТаблицы.Цена = ЦенаБезНДС;
	СтрокаТаблицы.Сумма = КолВо * ЦенаБезНДС;
	СтрокаТаблицы.СтавкаНДС = СтрокаТаблицы.Номенклатура.СтавкаНДС;
	СтрокаТаблицы.СуммаНДС = СтрокаТаблицы.Сумма * СтавкаНДС.Ставка / 100;
	СтрокаТаблицы.СуммаВсего = СтрокаТаблицы.Сумма + СтрокаТаблицы.СуммаНДС;
	ЗаказОбъект.Записать(РежимЗаписиДокумента.Проведение);

		Строки = ЗаказСсылка.Товары.Количество();
		Итог = ЗаказСсылка.Товары.Итог("СуммаВсего");

 Текст = "Итоговая сумма заказа = " + Итог + "
 											|Количество строк в табличной части = " + Строки;


	Иначе
Текст = "Такого заказа не существует";									 
											 										 
КонецЕсли;

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = Текст;
Сообщение.Сообщить();


```
# 1-1-10 
# Пометить на удаление непроведенные
[Оглавление](#Oglavlenie)
```
// Нужно пометить на удаление все непроведенные заказы поставщику за период с 01.08.2023 по 31.08.2023.
// Сообщить пользователю информацию о помеченных на удаление документах.
// Если ни один документ не помечен на удаление, нужно показать сообщение "В заданном периоде не найдено документов, подлежащих удалению".

ДатаНачала = '20230108';
ДатаКонца = '20230831';
КолВо = 0;

Выборка = Документы.ЗаказПоставщику.Выбрать(ДатаНачала,ДатаКонца);

Пока Выборка.Следующий() Цикл
	Заказ = Выборка.ПолучитьОбъект();
	Если НЕ Заказ.Проведен Тогда
		Заказ.УстановитьПометкуУдаления(истина);
		КолВо = КолВо + 1;
	КонецЕсли;
	
КонецЦикла;

Если НЕ КолВо = 0 Тогда
	Текст = "Документы помечены на удаление";
Иначе
	Текст = "В заданном периоде не найдено документов, подлежащих удалению";
КонецЕсли;
	
Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = Текст;
Сообщение.Сообщить();
```

# 1-2
# Работа с ПВХ

# 1-2-1
# Заполнить доп. реквизит номенклатуры
[Оглавление](#Oglavlenie)
```
// Для номенклатуры "Электронная книга PocketBook 617" (артикул "pocketbook617wh") нужно заполнить дополнительные реквизиты:
// "Цвет" - <Черный>
// "Дата выхода на рынок" - 01.01.2022
// Если номенклатуры с таким наименованием нет в справочнике, нужно сообщить пользователю об этом.

НоменклатураССылка = Справочники.Номенклатура.НайтиПоРеквизиту ("Артикул", "pocketbook617wh");
Если НЕ НоменклатураССылка.Пустая() Тогда
	
	НоменклатураОбъект = НоменклатураСсылка.ПолучитьОбъект();
	ЕстьИзменения = Ложь;
	ГруппаСвойств = ПланыВидовХарактеристик.ДополнительныеРеквизиты.Справочник_Номенклатура;
	
	СвойсвтоЦвет = ПланыВидовХарактеристик.ДополнительныеРеквизиты.НайтиПоНаименованию("Цвет", Истина, ГруппаСвойств);
	
	Если НЕ СвойсвтоЦвет.Пустая() Тогда
		
		ЗначениеЦветаСыылка = Справочники.ЗначенияДополнительныхРеквизитов.НайтиПоНаименованию("Черный", Истина,, СвойсвтоЦвет);
		Если НЕ ЗначениеЦветаСыылка.Пустая() Тогда
			
			СтрокаТаблицы = НоменклатураОбъект.ДополнительныеРеквизиты.Найти(СвойсвтоЦвет, "ДополнительныйРеквизит");
			
			Если СтрокаТаблицы = Неопределено Тогда
				СтрокаТаблицы = НоменклатураОбъект.ДополнительныеРеквизиты.Добавить();
				СтрокаТаблицы.ДополнительныйРеквизит = СвойсвтоЦвет;
			КонецЕсли;
			СтрокаТаблицы.Значение = ЗначениеЦветаСыылка;
			
			ЕстьИзменения = Истина;
			
		Иначе
			Текст = "Не найдено значение ""Черный"" свойства ""Цвет""";
		КонецЕсли;
	Иначе
		Текст = "Не найдено свойство номенклатуры ""Цвет""";
	КонецЕсли;
	
	СвойствоДатаВыхода = ПланыВидовХарактеристик.ДополнительныеРеквизиты.НайтиПоНаименованию("Дата выхода на рынок", Истина, ГруппаСвойств);
	Если Не СвойствоДатаВыхода.Пустая() Тогда
		
		
		СтрокаТаблицы = НоменклатураОбъект.ДополнительныеРеквизиты.Найти(СвойствоДатаВыхода, "ДополнительныйРеквизит");
		
		Если СтрокаТаблицы = Неопределено Тогда
			СтрокаТаблицы = НоменклатураОбъект.ДополнительныеРеквизиты.Добавить();
			СтрокаТаблицы.ДополнительныйРеквизит = СвойствоДатаВыхода;
		КонецЕсли;
		
		СтрокаТаблицы.Значение = '20220101';
		
		ЕстьИзменения = Истина;
		
	Иначе
		Текст = "Не найдено свойство номенклатуры ""Дата выхода на рынок""";
	КонецЕсли;
	
	Если ЕстьИзменения Тогда 
		НоменклатураОбъект.Записать();
		Текст = "Свойство номенклатуры успешно заполнены"
	КонецЕсли;
	
Иначе
	Текст = "Номенклатура не найдена";
КонецЕсли;

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = Текст;
Сообщение.Сообщить();



```

# 1-2-2
# Получить значение доп. реквизита
[Оглавление](#Oglavlenie)
```

// Для номенклатуры "Смартфон Google Pixel 8 Pro 12GB/128GB" (артикул "pixel8pro12128ba")
// нужно получить значение дополнительного реквизита "Цвет" и сообщить его пользователю.
// Если номенклатуры с таким наименованием нет в справочнике, нужно сообщить пользователю об этом.

ТоварСсылка = Справочники.Номенклатура.НайтиПоРеквизиту("Артикул", "pixel8pro12128ba");

Если НЕ ТоварСсылка.Пустая() Тогда
	ТоварОбъект = ТоварСсылка.ПолучитьОбъект();
	
	ГруппаСвойств = ПланыВидовХарактеристик.ДополнительныеРеквизиты.Справочник_Номенклатура;
	
	СвойсвтоЦвет = ПланыВидовХарактеристик.ДополнительныеРеквизиты.НайтиПоНаименованию("Цвет", Истина, ГруппаСвойств);
	Если НЕ СвойсвтоЦвет.Пустая() Тогда
		
		СтрокаТаблицы = ТоварОбъект.ДополнительныеРеквизиты.Найти(СвойсвтоЦвет, "ДополнительныйРеквизит");
		
		Если НЕ СтрокаТаблицы = Неопределено Тогда
			
			ЗначениеЦвета = СтрокаТаблицы.Значение;
			Текст = ЗначениеЦвета;
				
		Иначе
			Текст = "Такого свойства нет";
		КонецЕсли;
		
	КонецЕсли;
Иначе
	
	Текст = "Не найдено свойство номенклатуры ""Цвет""";
КонецЕсли;

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = Текст;
Сообщение.Сообщить();
```


# 1-2-3
 # Все доп. реквизиты номенклатуры
 [Оглавление](#Oglavlenie)

 ```
 // Нужно показать в виде сообщения значения дополнительных реквизитов номенклатуры
// "Электронная книга PocketBook 617" (артикул "pocketbook617wh") в формате:
// "<Имя доп. реквизита>: <Значение>"
// Пример:
// "Цвет: красный
//	Дата выхода на рынок: 01.01.2022"

СсылкаТовар = Справочники.Номенклатура.НайтиПоРеквизиту("Артикул", "pocketbook617wh");
Если НЕ СсылкаТовар.Пустая() Тогда
	
	
	ТоварОбъект = СсылкаТовар.ПолучитьОбъект();
	
	Для Каждого СтрокаТаблицы Из ТоварОбъект.ДополнительныеРеквизиты Цикл 
		
		Сообщение = Новый СообщениеПользователю;
		Сообщение.Текст = Строка(СтрокаТаблицы.ДополнительныйРеквизит) + " : " +  СтрокаТаблицы.Значение;
		Сообщение.Сообщить();
	КонецЦикла;

Иначе
	Сообщение = Новый СообщениеПользователю;
	Сообщение.Текст = "Товар не найден";
	Сообщение.Сообщить();
КонецЕсли;

 ```

 # 2
 # Прогрммная работа с РегистрамиСведений и РегистрамиАНкоплений
[Оглавление](#Oglavlenie)
# 2-1 
# Регистры сведений

# 2-1-1
# Заполнение производственного календаря
[Оглавление](#Oglavlenie)
```
// Заполните регистр сведений "Данные производственного календаря" данными за текущий год.
// Для каждой даты текушего года нужно добавить запись в регистр сведений и заполнить "ВидДня" по следующим правилам:
// 1 января и 8 марта: Вид дня "Праздник"
// 31 декабря и 7 марта: Вид дня "Предпраздничный"
// Для всех остальных дат:
//   - если день недели "Суббота", то вид дня "Суббота"
//   - если день недели "Воскресенье", то вид дня "Воскресенье"
//   - если день недели с понедельника по пятницу, то вид дня "Рабочий"
// После заполнения регистра нужно показать сообщение "Производственный календарь успешно заполнен".

НачГода = НачалоГода(ТекущаяДата());
КонГода = КонецГода(ТекущаяДата());

ТекДата = НачГода;

Пока ТекДата <= КонГода Цикл
	Запись = РегистрыСведений.ДанныеПроизводственногоКалендаря.СоздатьМенеджерЗаписи();
	Запись.Дата = ТекДата;
	
	Если ТекДата = '20240101' ИЛИ ТекДата = '20240308' Тогда
		Запись.ВидДня = Перечисления.ВидыДнейПроизводственногоКалендаря.Праздник;
	ИначеЕсли ТекДата = '20241231' ИЛИ ТекДата = '20240307' Тогда
		Запись.ВидДня = Перечисления.ВидыДнейПроизводственногоКалендаря.Предпраздничный;
	ИначеЕсли ДеньНедели(ТекДата) = 6  Тогда
		Запись.ВидДня = Перечисления.ВидыДнейПроизводственногоКалендаря.Суббота;
	ИначеЕсли ДеньНедели(ТекДата) = 7  Тогда
		Запись.ВидДня = Перечисления.ВидыДнейПроизводственногоКалендаря.Воскресенье;
	Иначе;
		Запись.ВидДня = Перечисления.ВидыДнейПроизводственногоКалендаря.Рабочий;

	КонецЕсли;
ТекДата = ТекДата + 86400;
Запись.Записать();
КонецЦикла;
```
# 2-1-2
# Рабочий или выходной день
[Оглавление](#Oglavlenie)
```
// Используя данные в регистре сведений "Данные производственного календаря" определите вид дня
// для даты своего Дня рождения в этом году (рабочий, выходной, праздничный или предпраздничный)
// и покажите его в виде сообщения

ДеньРождения = '20240809';

Отбор = Новый Структура("Дата", ДеньРождения);

Данные = РегистрыСведений.ДанныеПроизводственногоКалендаря.Получить(Отбор);
Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = Данные.ВидДня;
Сообщение.Сообщить();
```
# 2-1-3
# Аналоги номенклатуры
[Оглавление](#Oglavlenie)
```
// Получите все аналоги номенклатуры "Планшет Apple iPad Air 2022 64GB MM9C3" и сообщите их наименования и артикулы.
// Информация об аналогах хранится в регистре сведений "Аналоги номенклатуры".
// Если аналогов нет, об этом также сообщить пользователю.


Товар = Справочники.Номенклатура.НайтиПоНаименованию("OLED телевизор LG B3 OLED65B3RLA");
Счетчик = 0;
Если НЕ Товар.Пустая() Тогда
	
	Отбор = Новый Структура;
	Отбор.Вставить("Номенклатура", Товар);
	
	Выборка = РегистрыСведений.АналогиНоменклатуры.Выбрать(Отбор);
	
	Пока Выборка.Следующий() Цикл
		Счетчик = Счетчик + 1;
		Сообщение = Новый СообщениеПользователю;
		Сообщение.Текст = "Аналог = " + Выборка.Аналог + ", Артикул: "+ Выборка.Аналог.Артикул;
		Сообщение.Сообщить();
	КонецЦикла;
	
Если Счетчик = 0 Тогда 
	Сообщение = Новый СообщениеПользователю;
	Сообщение.Текст = "Аналогов не существует";
	Сообщение.Сообщить();
КонецЕсли;

Иначе
	Сообщение = Новый СообщениеПользователю;
	Сообщение.Текст = "Такого товара не существует";
	Сообщение.Сообщить();
КонецЕсли;
```
# 2-1-4
# Самый дорогой товар
[Оглавление](#Oglavlenie)
```
// По данным регистра сведений "Цены номенклатуры" определите самый дорогой товар на сегодняшний день
// по виду цен "Розничная". Сообщите наименование товара, его артикул и цену.
ВидЦен = Справочники.ВидыЦен.НайтиПоНаименованию("Розничная");
Отбор = Новый Структура("ВидЦен", ВидЦен);
ДатаКонца = '20241201';

ТаблицаЗнач = РегистрыСведений.ЦеныНоменклатуры.СрезПоследних(ДатаКонца,Отбор);

ТаблицаЗнач.Сортировать("Цена Убыв");
ТаблицаЗнач.ВыбратьСтроку();

Товар = Справочники.Номенклатура.НайтиПоНаименованию(ТаблицаЗнач[0].Номенклатура);


Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = "" + ТаблицаЗнач[0].Номенклатура + "артикул: " + Товар.Артикул + "Цена: " + ТаблицаЗнач[0].Цена;
Сообщение.Сообщить();

```
# 2-1-5
# Курс евро
[Оглавление](#Oglavlenie)
```
// По данным регистра сведений "Курсы валют" определите актуальный курс евро на сегодня (код валюты "978").
// Покажите сообщение вида "Курс EUR на <ТекущаяДата>: <АктуальныйКурс>".

ДатаСегодня = ТекущаяДата();

Валюта = Справочники.Валюты.НайтиПоКоду("978");

Если НЕ Валюта.Пустая() Тогда	

	Отбор = Новый Структура("Валюта", Валюта);
	
	ДанныеКурсаАктуального = РегистрыСведений.КурсыВалют.ПолучитьПоследнее(ДатаСегодня, Отбор);
	Сообщение = Новый СообщениеПользователю;
	Сообщение.Текст = "Курс EUR на " + ТекущаяДата() + " : " + ДанныеКурсаАктуального.Курс;
	Сообщение.Сообщить();
	
Иначе
	Сообщение = Новый СообщениеПользователю;
	Сообщение.Текст = "Валюта не найдена";	
	Сообщение.Сообщить();	
КонецЕсли;
```
# 2-1-6
# Размер оклада
[Оглавление](#Oglavlenie)
```
// Нужно получить текущий (актуальный) размер оклада сотрудника "Михаил Петров" и сообщить его.
// Размеры окладов хранятся в регистре сведений "Плановые начисления"

СотрудникСсылка = Справочники.Сотрудники.НайтиПоНаименованию("Михаил Петров", Истина);
НачислениеСсылка = ПланыВидовРасчета.Начисления.НайтиПоНаименованию("Оклад", Истина);
Если НЕ СотрудникСсылка.Пустая() И НЕ НачислениеСсылка.Пустая() Тогда
	
	Отбор = Новый Структура;
    Отбор.Вставить("Сотрудник",СотрудникСсылка);
    Отбор.Вставить("Начисление", НачислениеСсылка);
	Данные = РегистрыСведений.ПлановыеНачисления.ПолучитьПоследнее(,Отбор);
	Текст = "Текущий актуальный размер оклада у Михаила Петрова = "+ Данные.Размер;
	
Иначе
	Текст = "Такого сотрудника не существует";
КонецЕсли;

	Сообщение = Новый СообщениеПользователю;
	Сообщение.Текст = Текст;
	Сообщение.Сообщить();
```
# 2-1-7
# Найти номенклатуру по коду
[Оглавление](#Oglavlenie)
```
// Нужно найти номенклатуру по штрихкоду 123456789022 и сообщить её наименование. 
// Если номенклатуры с таким штрихкодом нет, нужно сообщить об этом пользователю.
// Информация о штрихкодах номенклатуры хранится в регистре сведений "Штрихкоды номенклатуры".


Отбор = новый Структура;
Отбор.Вставить("Штрихкод", "123456789022");

СтруктураОтбора = РегистрыСведений.ШтрихкодыНоменклатуры.Получить(Отбор);
	
Если ЗначениеЗаполнено(СтруктураОтбора.Номенклатура) Тогда
	
	Сообщение = Новый СообщениеПользователю;
	Сообщение.Текст = СтруктураОтбора.Номенклатура;
	Сообщение.Сообщить();
Иначе
	Сообщение = Новый СообщениеПользователю;
	Сообщение.Текст = "товара не существует";
	Сообщение.Сообщить();
КонецЕсли;
```
# 2-1-8
# Добавить штрихкод номенклатуры
[Оглавление](#Oglavlenie)
```
// Для номенклатуры "Беззеркальный фотоаппарат Nikon Z5 Body" добавить штрихкод "978020137962".
// Информация о штрихкодах хранится в регистре сведений "Штрихкоды номенклатуры".

Товар = Справочники.Номенклатура.НайтиПоНаименованию("Беззеркальный фотоаппарат Nikon Z5 Body", Истина);
Если НЕ Товар.Пустая() Тогда 
	Запись = РегистрыСведений.ШтрихкодыНоменклатуры.СоздатьМенеджерЗаписи();
	Запись.Номенклатура = Товар;
	Запись.Штрихкод = "978020137962";
	Запись.Записать();
	Текст = "Штрихкод успешно добавлен";
Иначе 
	Сообщение = Новый СообщениеПользователю;
	Сообщение.Текст = "Товар не найден";
	Сообщение.Сообщить();

КонецЕсли;

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = Текст;
Сообщение.Сообщить();
```
# 2-1-9
# Цена на товар у поставщика
[Оглавление](#Oglavlenie)
```
// Нужно определить какая на сегодняшний день цена на товар "OLED телевизор LG B3 OLED65B3RLA"
// у поставщика "ОптиТрейд, ООО". Цены поставщиков хранятся в регистре сведений "Цены поставщиков".
// Если информации о цене нет в регистре, нужно сообщить об этом пользователю.

Товар = Справочники.Номенклатура.НайтиПоНаименованию("OLED телевизор LG B3 OLED65B3RLA", Истина);
Контрагент = Справочники.Контрагенты.НайтиПоНаименованию("ОптиТрейд, ООО", Истина);
Отбор = Новый Структура;
Отбор.Вставить("Номенклатура", Товар);
Отбор.Вставить("Контрагент", Контрагент);

СтруктураПоиска = РегистрыСведений.ЦеныПоставщиков.ПолучитьПоследнее(,Отбор);

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = СтруктураПоиска.Цена;
Сообщение.Сообщить();

```
# 2-1-10
# Прайс-Лист
[Оглавление](#Oglavlenie)
```
// Нужно получить таблицу актуальных на конец предыдущего месяца цен продажи всех товаров по виду цен "Розничная".
// Информация о ценах продажи содержится в регистре сведений "Цены номенклатуры".
// Покажите пользователю информацию о ценах в виде сообщений: "<НаименованиеТовара> (арт. <Артикул>): <Цена>".

ВидыЦен = Справочники.ВидыЦен.НайтиПоНаименованию("Розничная", Истина);

Отбор = Новый Структура;
Отбор.Вставить("ВидЦен", ВидыЦен);

ДатаОкнончания = КонецМесяца(ТекущаяДата());

ТаблЗнач = РегистрыСведений.ЦеныНоменклатуры.СрезПоследних(ДатаОкнончания, Отбор);
ТаблЗнач.ВыбратьСтроку();


Для Каждого СтрокаТаблицы Из ТаблЗнач Цикл
	Сообщение = Новый СообщениеПользователю;
	Сообщение.Текст = "" + СтрокаТаблицы.Номенклатура + "(арт.) " + СтрокаТаблицы.Номенклатура.Артикул + " Цена : "+  СтрокаТаблицы.Цена;
	Сообщение.Сообщить();
КонецЦикла;

```

# 2-2 
# Работа с регистрами накоплений
[Оглавление](#Oglavlenie)
# 2-2-1
# Количество поставок товара
[Оглавление](#Oglavlenie)
```
// Нужно определить количество поступлений товара "Телевизор Sony Bravia X90K XR-65X90K" за прошлый месяц.
// Количество поступлений = количество различных документов "Приходная накладная", в которых содержался этот товар.
// Информацию о поступлениях нужно получать по данным регистра "Товары на складах".

Номенклатура = Справочники.Номенклатура.НайтиПоНаименованию("Телевизор Sony Bravia X90K XR-65X90K", Истина);
НачалоМесяца = '20231001';
КонецМесяца = '20231028';
Количество = 0;

Если НЕ Номенклатура.Пустая() Тогда
	
	Отбор = Новый Структура;
	Отбор.Вставить("Номенклатура", Номенклатура);
	
	Выборка = РегистрыНакопления.ТоварыНаСкладах.Выбрать(НачалоМесяца,КонецМесяца, Отбор);
	Пока Выборка.Следующий() Цикл
		Если Выборка.ВидДвижения = ВидДвиженияНакопления.Приход Тогда
			Количество = Количество + 1 ;
		КонецЕсли;
	КонецЦикла;
	Текст = "Количесвто полуплений = " + Количество;
Иначе
	Текст = "Такого товара не существует";
КонецЕсли;

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = Текст;
Сообщение.Сообщить();

```

# 2-2-2
#  Количество проданных единиц за месяц
[Оглавление](#Oglavlenie)
```
// Нужно определить сколько единиц товара "OLED телевизор LG B3 OLED65B3RLA" (артикул "OLED65B3RLA")
// было продано за предыдущий месяц. Информацию о продажах нужно получать из регистра накопления "Продажи".

Артикул = "OLED65B3RLA";
Номенклатура = Справочники.Номенклатура.НайтиПоНаименованию("OLED телевизор LG B3 OLED65B3RLA", Истина);
НачалоМесяца = '20231001';
КонецМесяца = '20231028';
Количество = 0;

Если НЕ Номенклатура.Пустая() Тогда
	
	Отбор = Новый Структура;
	Отбор.Вставить("Номенклатура", Номенклатура);
	
	Выборка = РегистрыНакопления.Продажи.Выбрать(НачалоМесяца,КонецМесяца, Отбор);
	Пока Выборка.Следующий() Цикл
		Количество = Количество + 1 ;
	КонецЦикла;
	
	Текст = "Количесвто единиц товара = " + Количество;
Иначе
	Текст = "Такого товара не существует";
КонецЕсли;

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = Текст;
Сообщение.Сообщить();
```

# 2-2-3
# Продажи по контрагентам
[Оглавление](#Oglavlenie)
```
// Нужно получить таблицу с информацией о сумме продаж в разрезе контрагентов за весь период учета.
// Информацию о продажах нужно получать из регистра накопления "Продажи".
// Таблица должна быть отсортирована по убыванию суммы продаж.


МассивСообщений = Новый Массив;
	
Обороты = РегистрыНакопления.Продажи.Обороты(, , , "Контрагент");
Обороты.Сортировать("Сумма Убыв");

Для Каждого Элем Из Обороты Цикл
	МассивСообщений.Добавить(СтрШаблон("""%1"" сумма продаж: %2", Элем.Контрагент.Наименование, Элем.Сумма));
КонецЦикла;	

Если МассивСообщений.Количество() = 0 Тогда
	МассивСообщений.Добавить("За выбранный период нет продаж");
КонецЕсли;	

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = СтрСоединить(МассивСообщений, Символы.ПС);
Сообщение.Сообщить();
```

# 2-2-4
# Остатки денежных средств
```
// Нужно получить остатки денежных средств на банковских счетах организации "Айрон Электроникс" в разрезе счетов и валют.
// Информацию об остатках денежных средств нужно получать из регистра накопления "Денежные средства".
// Покажите остатки на счетах в виде сообщений "Счет № <НомерСчета>: <СуммаОстаток> <Валюта>".

Организация = Справочники.Организации.ОсновнаяОрганизация;
МассивСообщений = Новый Массив;


Фильтр = Новый Структура("Организация", Организация);
Данные = РегистрыНакопления.ДенежныеСредства.Остатки(, Фильтр, "БанковскийСчет, Валюта");

Для каждого Элем Из Данные Цикл
	МассивСообщений.Добавить(СтрШаблон("Счет № %1: %2 %3", Элем.БанковскийСчет.НомерСчета, Элем.Сумма, Элем.Валюта));	
КонецЦикла;


Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = СтрСоединить(МассивСообщений, Символы.ПС);
Сообщение.Сообщить();``

```

# 2-2-5
# Остатки товаров на складе
[Оглавление](#Oglavlenie)
```
// Получить остатки всех товаров на складе "Основной".
// Информацию об остатках товаров нужно получать из регистра накопления "Товары на складах".
// Покажите остатки товаров в виде сообщений "<Номенклатура>: <КоличествоОстаток> <ЕдиницаИзмерения>".
// <ЕдиницаИзмерения> - значение одноименного реквизита справочника "Номенклатура".

Склад = Справочники.Склады.НайтиПоНаименованию("Основной", Истина);
ЕдиницаИзмерения = Справочники.КлассификаторЕдиницИзмерения;
МассивСообщений = Новый Массив;
Отбор = Новый Структура;
Отбор.Вставить("Склад", Склад);

ТаблицаОстатков = РегистрыНакопления.ТоварыНаСкладах.Остатки(,Отбор, "Номенклатура","Количество");

Для Каждого СтрокаТаблицы ИЗ ТаблицаОстатков Цикл
	
	МассивСообщений.Добавить(СтрШаблон("%1 : %2 %3",СтрокаТаблицы.Номенклатура, СтрокаТаблицы.Количество, СтрокаТаблицы.Номенклатура.ЕдиницаИзмерения));
	
КонецЦикла;


Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = СтрСоединить(МассивСообщений, Символы.ПС);
Сообщение.Сообщить();
```

# 3
# Программная работа с регистрами бухгалтерии и работа с задачами и безнес пройессами
[Оглавление](#Oglavlenie)
# 3-1
# Регистры Бухгалтерии
[Оглавление](#Oglavlenie)

# 3-1-1 
# Остатки всех товаров
[Оглавление](#Oglavlenie)
```
// Нужно получить остатки всех товаров (количество и сумму) в разрезе товаров и складов по данным регистра бухгалтерии.
// Счет учета товаров - 41. Покажите информацию об остатках в виде сообщений.Отбор = Новый Структура("Счет", ПланыСчетов.Хозрасчетный.Товары);

МассивСубконто = Новый Массив;
МассивСубконто.Добавить(ПланыВидовХарактеристик.ВидыСубконтоХозрасчетные.Склады);
МассивСубконто.Добавить(ПланыВидовХарактеристик.ВидыСубконтоХозрасчетные.Номенклатура);

Счет = ПланыСчетов.Хозрасчетный.Товары;
Отбор = Новый Структура("Счет", Счет);

ТаблицаОстатков = РегистрыБухгалтерии.Хозрасчетный.Остатки(,МассивСубконто,Отбор,,"Сумма, Количество");
ТаблицаОстатков.ВыбратьСтроку();
Для Каждого СтрокаТаблицы Из ТаблицаОстатков Цикл
	
	Сообщение = Новый СообщениеПользователю;
	Сообщение.Текст = СтрШаблон("%1, склад %2, количесвто = %3 , сумма = %4", СтрокаТаблицы.Субконто2, СтрокаТаблицы.Субконто1, СтрокаТаблицы.КоличествоОстатокДт, СтрокаТаблицы.СуммаОстатокДт) ;
	Сообщение.Сообщить();
	
КонецЦикла;


``` 
# 3-1-2
# Остатки конкретного товара
[Оглавление](#Oglavlenie)
```
// Нужно получить остаток товара (количество) "Планшет HONOR Pad 8 128GB" на складе "Магазин" по данным регистра бухгалтерии.
// Счет учета товаров - 41. Покажите информацию об остатках в виде сообщения.


МассивСубконто = Новый Массив;
МассивСубконто.Добавить(ПланыВидовХарактеристик.ВидыСубконтоХозрасчетные.Склады);
МассивСубконто.Добавить(ПланыВидовХарактеристик.ВидыСубконтоХозрасчетные.Номенклатура);

Счет = ПланыСчетов.Хозрасчетный.Товары;
Номенклатура = Справочники.Номенклатура.НайтиПоНаименованию("Планшет HONOR Pad 8 128GB", Истина);
Склад = Справочники.Номенклатура.НайтиПоНаименованию("Основной", Истина);

Отбор = Новый Структура("Счет", Счет);
Отбор.Вставить("Субконто2",Номенклатура);
//Отбор.Вставить("Субконто1", Склад); не знаю почему не срабатывает отбор по магазину

ТаблицаОстатков = РегистрыБухгалтерии.Хозрасчетный.Остатки(,МассивСубконто,Отбор,,"Сумма, Количество");
ТаблицаОстатков.ВыбратьСтроку();
Для Каждого СтрокаТаблицы Из ТаблицаОстатков Цикл
	
	Сообщение = Новый СообщениеПользователю;
	Сообщение.Текст = СтрШаблон("%1, склад %2, количесвто = %3 ", СтрокаТаблицы.Субконто2, СтрокаТаблицы.Субконто1, СтрокаТаблицы.КоличествоОстатокДт) ;
	Сообщение.Сообщить();
	
КонецЦикла;

```

# 3-1-3 
# Долги клиентов
[Оглавление](#Oglavlenie)
```
// Нужно получить остатки задолженности клиентов в разрезе контрагентов и договоров по данным регистра бухгалтерии.
// Счет учета расчетов с клиентами - 62. Покажите информацию об остатках в виде сообщений.

Счет = ПланыСчетов.Хозрасчетный.РасчетыСПокупателями;
МассивСообщений = Новый Массив;

МассивСубконто = Новый Массив;
МассивСубконто.Добавить(ПланыВидовХарактеристик.ВидыСубконтоХозрасчетные.Контрагенты);
МассивСубконто.Добавить(ПланыВидовХарактеристик.ВидыСубконтоХозрасчетные.ДоговорыКонтрагентов);

Отбор = Новый Структура("Счет", Счет);
Долги = РегистрыБухгалтерии.Хозрасчетный.Остатки(, МассивСубконто, Отбор, "Счет, Субконто1, Субконто2", "Сумма");
Долги.Сортировать("Субконто1 Возр, Субконто2 Возр");

Долги.ВыбратьСтроку();

Для Каждого Элем Из Долги Цикл
	МассивСообщений.Добавить(СтрШаблон("""%1"", договор: ""%2"", задолженность: %3", 
										Элем.Субконто1, Элем.Субконто2, Элем.СуммаОстатокДт));
КонецЦикла;

Если МассивСообщений.Количество() = 0 Тогда
	МассивСообщений.Добавить(СтрШаблон("По счету %1 остаток = 0", Счет.Код));
КонецЕсли;

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = СтрСоединить(МассивСообщений, Символы.ПС);
Сообщение.Сообщить();
```

# 3-1-4
# Долги поставщикам
[Оглавление](#Oglavlenie)
```
// Нужно получить остатки задолженности перед поставщиками в разрезе контрагентов и договоров по данным регистра бухгалтерии.
// Счет учета расчетов с поставщиками - 60. Покажите информацию об остатках в виде сообщений.


Счет = ПланыСчетов.Хозрасчетный.РасчетыСПоставщиками;
МассивСообщений = Новый Массив;

МассивСубконто = Новый Массив;
МассивСубконто.Добавить(ПланыВидовХарактеристик.ВидыСубконтоХозрасчетные.Контрагенты);
МассивСубконто.Добавить(ПланыВидовХарактеристик.ВидыСубконтоХозрасчетные.ДоговорыКонтрагентов);

Отбор = Новый Структура("Счет", Счет);
КрДолги = РегистрыБухгалтерии.Хозрасчетный.Остатки(, МассивСубконто, Отбор, "Счет, Субконто1, Субконто2", "Сумма");
КрДолги.Сортировать("Субконто1 Возр, Субконто2 Возр");

// КрДолги.ВыбратьСтроку();

Для Каждого Элем Из КрДолги Цикл
	МассивСообщений.Добавить(СтрШаблон("""%1"", договор: ""%2"", кредиторская задолженность: %3", 
										Элем.Субконто1.Наименование, Элем.Субконто2.Наименование, Элем.СуммаОстатокКт));
КонецЦикла;

Если МассивСообщений.Количество() = 0 Тогда
	МассивСообщений.Добавить(СтрШаблон("По счету %1 остаток = 0", Счет.Код));
КонецЕсли;

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = СтрСоединить(МассивСообщений, Символы.ПС);
Сообщение.Сообщить();

```

# 3-1-5
# Продажи за период
[Оглавление](#Oglavlenie)
```
// Нужно получить обороты по продажам товаров за предыдущий месяц по данным регистра бухгалтерии.
// Покажите информацию о продажах в виде сообщений "<Товар>: продано <Количество> ед. на сумму <Сумма>".


Счет	= ПланыСчетов.Хозрасчетный.Товары;
КорСчет = ПланыСчетов.Хозрасчетный.РасчетыСПокупателями;

ТекДата = ТекущаяДата();
КонецПериода = НачалоМесяца(ТекДата) - 1;
НачалоПериода = НачалоМесяца(КонецПериода);

МассивСообщений = Новый Массив;

Отбор = Новый Структура("Счет, КорСчет", Счет, КорСчет);
МассивСубконто = Новый Массив;
МассивСубконто.Добавить(ПланыВидовХарактеристик.ВидыСубконтоХозрасчетные.Номенклатура);

Продажи = РегистрыБухгалтерии.Хозрасчетный.Обороты(НачалоПериода, КонецПериода, МассивСубконто,, Отбор, "Субконто1", "Сумма, Количество");
Продажи.Сортировать("Субконто1 Возр");

 Продажи.ВыбратьСтроку();

МассивСообщений.Добавить(СтрШаблон("Продажи за период с %1 по %2" + Символы.ПС, 
												Формат(НачалоПериода, "ДЛФ = DD"), Формат(КонецПериода, "ДЛФ = DD")));
Для каждого Элем Из Продажи Цикл	
	МассивСообщений.Добавить(СтрШаблон("""%1"", продано: %2 ед. на сумму: %3", Элем.Субконто1.Наименование, Элем.КоличествоОборотКт, Элем.СуммаОборотКт));
КонецЦикла;

Если МассивСообщений.Количество() = 0 Тогда
	МассивСообщений.Добавить("Нет оборотов за выбранный период");
КонецЕсли;	

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = СтрСоединить(МассивСообщений, Символы.ПС);
Сообщение.Сообщить();
```

# 3-2
# Работа с задачами и бизнес процессами
[Оглавление](#Oglavlenie)


# 3-2-1
# Создать задачу
[Оглавление](#Oglavlenie)
```
// Создайте задачу "Обновить платформу 1С". Исполнителем задачи нужно назначить пользователя "Григорий".
// Срок выполнения: 20.11.2023, описание задачи "Нужно обновить версию платформы до 8.3.23.1782".
// Сообщите номер созданной задачи.

ЗадачаИмя		= "Обновить платформу 1С";
ЗадачаОписание	= "Нужно обновить версию платформы до 8.3.23.1782";
ИсполнительИмя	= "Григорий";
СрокВыполнения	= '20231120';
Текст = "";

Исполнитель = Справочники.Пользователи.НайтиПоНаименованию(ИсполнительИмя, Истина);

Если Не Исполнитель.Пустая() Тогда
	ЗадачаОб = Задачи.ЗадачаИсполнителя.СоздатьЗадачу();
	ЗадачаОб.Наименование	= ЗадачаИмя;
	ЗадачаОб.Описание		= ЗадачаОписание;
	ЗадачаОб.СрокИсполнения	= СрокВыполнения;
	ЗадачаОб.Исполнитель	= Исполнитель;
	ЗадачаОб.Автор			= ПараметрыСеанса.ТекущийПользователь;
	ЗадачаОб.Важность		= Перечисления.ВариантыВажностиЗадачи.Обычная;
	ЗадачаОб.Дата			= ТекущаяДата();
	
	Попытка
		ЗадачаОб.Записать();
		Текст = СтрШаблон("Задача № %1 от %2 записана", ЗадачаОб.Номер, Формат(ЗадачаОб.Дата, "ДЛФ = DD"));
	Исключение
		Текст = ИнформацияОбОшибке();
	КонецПопытки;
Иначе 
	Текст = СтрШаблон("Пользователь ""%1"" не найден в справочнике", ИсполнительИмя);
КонецЕсли;	

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = Текст;
Сообщение.Сообщить();

```

# 3-2-2
# Невыполненные задачи
[Оглавление](#Oglavlenie)
```
// Нужно найти все невыполненные задачи пользователя "Виктория" и сообщить наименование задачи, срок исполнения и автора задачи.

// Нужно найти все невыполненные задачи пользователя "Виктория" и сообщить наименование задачи, срок исполнения и автора задачи.

ИсполнительИмя = "Виктория";
МассивСообщений = Новый Массив;

Исполнитель = Справочники.Пользователи.НайтиПоНаименованию(ИсполнительИмя, Истина);
Если Не Исполнитель.Пустая() Тогда
	
	Отбор = Новый Структура("ПометкаУдаления, Выполнена, Исполнитель", Ложь, Ложь, Исполнитель);
	Параметры = Новый Структура("Отбор", Отбор);

	Данные = Задачи.ЗадачаИсполнителя.ПолучитьДанныеВыбора(Параметры);
//	Данные.ВыбратьЭлементАсинх();
	
	Если Данные.Количество() > 0 Тогда
		МассивСообщений.Добавить(СтрШаблон("Открытые задачи по исполнителю: %1" + Символы.ПС, Исполнитель.Наименование));
		
		Для каждого Элем Из Данные Цикл
			Задача = Элем.Значение;
			МассивСообщений.Добавить(СтрШаблон("Задача № %1, срок исполнения: %2, автор: %3", 
												Задача.Номер, Формат(Задача.СрокИсполнения, "ДЛФ = DD"), Задача.Автор.Наименование));	
		КонецЦикла;
	Иначе
		МассивСообщений.Добавить(СтрШаблон("У исполнителя ""%1"" все задачи выполнены", Исполнитель.Наименование));
	КонецЕсли;	
Иначе
	МассивСообщений.Добавить(СтрШаблон("Исполнитель ""%1"" не найден в справочнике ""Пользователи""", ИсполнительИмя));
КонецЕсли;

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = СтрСоединить(МассивСообщений, Символы.ПС);
Сообщение.Сообщить();
```


# 3-2-3
# Старт бизнес-процессов
[Оглавление](#Oglavlenie)
```

// Нужно стартовать все бизнес-процессы "Закупка" за текущую неделю, которые ещё не стартованы.
// Покажите в вобще сообщения количестов стартованных бизнес-процессов и их номера

БП = БизнесПроцессы.Закупка;
ТекДата = ТекущаяДата();
ДатаНачала = НачалоНедели(ТекДата);
ДатаОкончания = КонецНедели(ТекДата);

МассивСообщений = Новый Массив;

Отбор = Новый Структура("Стартован", Ложь);
Параметры = Новый Структура("Отбор", Отбор);

Данные = БП.ПолучитьДанныеВыбора(Параметры);
// Данные.ВыбратьЭлементАсинх();

КоличествоБП = Данные.Количество();

Если КоличествоБП > 0 Тогда
	
	МассивСообщений.Добавить(СтрШаблон("Будет стартовано бизнес - процессов: %1", КоличествоБП));
	
	Для каждого Элем Из Данные Цикл
		Если Элем.Значение.Дата < ДатаНачала Или Элем.Значение.Дата > ДатаОкончания Тогда
			Продолжить;
		КонецЕсли;
		
		ТекОбъект = Элем.Значение.ПолучитьОбъект();
		ТекОбъект.Старт();
		
		МассивСообщений.Добавить(СтрШаблон("Бизнес - процесс № %1 стартован", ТекОбъект.Номер));	
	КонецЦикла;
Иначе
	МассивСообщений.Добавить(СтрШаблон("За период с %1 по %2 нет бизнес-процессов для старта", 
											Формат(ДатаНачала, "ДЛФ = DD"), Формат(ДатаОкончания, "ДЛФ = DD")));	
КонецЕсли;	

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = СтрСоединить(МассивСообщений, Символы.ПС);
Сообщение.Сообщить();
```

# 3-3
# Дополнительные задачи
[Оглавление](#Oglavlenie)

# 3-3-1
#  Скопировать документ
[Оглавление](#Oglavlenie)
```
// Нужно создать новый документ "Заказ поставщику" путем копирования существующего документа с номером "00000000193".
// В новом документе нужно заполнить дату текущей датой и провести его.
// Покажите в виде сообщения номер и дату созданного документа, а также его сумму.


НомерДляПоиска = "00000000193";
ТекДата = ТекущаяДата();
Текст = "";

ЗаказПоставщикуСсылка = Документы.ЗаказПоставщику.НайтиПоНомеру(НомерДляПоиска, ТекДата);

Если Не ЗаказПоставщикуСсылка.Пустая() Тогда
	
	нЗаказОбъект = ЗаказПоставщикуСсылка.Скопировать();
	нЗаказОбъект.Дата = ТекДата;
	
	Попытка
		нЗаказОбъект.Записать(РежимЗаписиДокумента.Проведение);
		СумманЗаказОбъект = нЗаказОбъект.Товары.Итог("СуммаВсего");		
		Текст = СтрШаблон("Создан заказ поставщику № %1 от %2, сумма: %3", нЗаказОбъект.Номер, нЗаказОбъект.Дата, СумманЗаказОбъект);
	Исключение
		Текст = ОписаниеОшибки();
	КонецПопытки;	
Иначе
	Текст = СтрШаблон("Заказ поставщику № %1 в %2 г. не найден", НомерДляПоиска, Формат(ТекДата, "ДФ=гггг"));
КонецЕсли;

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = Текст;
Сообщение.Сообщить();
```

# 3-3-2
# Изменить розничные цены
[Оглавление](#Oglavlenie)
```
// Нужно изменить розничные цены (вид цен "Розничная") на несколько товаров.
// Новые цены:
//	 Наушники Haylou W1 (синий) - 18 399;
//	 Наушники Apple AirPods Pro 2 (с разъемом Lightning) - 20 150;
//	 Планшет HONOR Pad 8 128GB - 16 000.
// Информация о ценах хранится в регистре сведений "Цены номенклатуры".

МассивСообщений = Новый Массив;
ВидЦенИмя = "Розничная";

ВидЦен = Справочники.ВидыЦен.НайтиПоНаименованию(ВидЦенИмя, Истина);
Если Не ВидЦен.Пустая() Тогда
	
	ПоляСтруктуры = "Наименование, Номенклатура, ВидЦен, Цена";
	
	МассивТоваров = Новый Массив;
	МассивТоваров.Добавить(Новый Структура(ПоляСтруктуры, "Наушники Haylou W1 (синий)",, ВидЦен, 18399));
	МассивТоваров.Добавить(Новый Структура(ПоляСтруктуры, "Наушники Apple AirPods Pro 2 (с разъемом Lightning)",, ВидЦен, 20150));
	МассивТоваров.Добавить(Новый Структура(ПоляСтруктуры, "Планшет HONOR Pad 8 128GB",, ВидЦен, 16000));

	Индекс = МассивТоваров.ВГраница();
	Регистраторы = Новый Массив;
	
	Пока Индекс >= 0 Цикл		
		МассивТоваров[Индекс].Номенклатура = Справочники.Номенклатура.НайтиПоНаименованию(МассивТоваров[Индекс].Наименование, Истина);	
		
		Если МассивТоваров[Индекс].Номенклатура.Пустая() Тогда
			МассивСообщений.Добавить(СтрШаблон("Товар ""%1"" не найден", МассивТоваров[Индекс].Наименование));
			МассивТоваров.Удалить(Индекс);
		Иначе
			Отбор = Новый Структура("Номенклатура, ВидЦен");
			ЗаполнитьЗначенияСвойств(Отбор, МассивТоваров[Индекс]);
			
			ПоследниеЦены = РегистрыСведений.ЦеныНоменклатуры.СрезПоследних(, Отбор);		
			Если ПоследниеЦены.Количество() > 0 Тогда
				Если Регистраторы.Найти(ПоследниеЦены[0].Регистратор) = Неопределено Тогда
					Регистраторы.Добавить(ПоследниеЦены[0].Регистратор);
				КонецЕсли;
			Иначе
				МассивСообщений.Добавить(СтрШаблон("У ""%1"" нет значений с видом цен: ""%2""", 
															МассивТоваров[Индекс].Наименование, МассивТоваров[Индекс].ВидЦен));		
			КонецЕсли;		
		КонецЕсли;
				
		Индекс = Индекс - 1;
	КонецЦикла;
	
	Если Регистраторы.Количество() > 0 Тогда
		Для Каждого Рег Из Регистраторы Цикл
			РегОб = Рег.ПолучитьОбъект();
			
			Попытка
				РегОб.Заблокировать();						
				
				Для каждого Элем Из МассивТоваров Цикл
					Отбор = Новый Структура("Номенклатура", Элем.Номенклатура);
					МассивСтрок = РегОб.Товары.НайтиСтроки(Отбор);
					Для каждого Строка Из МассивСтрок Цикл
						Если Строка.Цена <> Элем.Цена Тогда
							Строка.Цена = Элем.Цена;
							МассивСообщений.Добавить(СтрШаблон("Изменена цена на ""%1"", документ %2", Элем.Наименование, РегОб.Ссылка));
						Иначе
							МассивСообщений.Добавить(СтрШаблон("Цена на ""%1"", уже = %2 руб.,  документ %3", Элем.Наименование, Элем.Цена, РегОб.Ссылка));	
						КонецЕсли;		
					КонецЦикла;
				КонецЦикла;
				
				Если РегОб.Модифицированность() Тогда
					Попытка
						РегОб.Записать(РежимЗаписиДокумента.Проведение, РежимПроведенияДокумента.Неоперативный);
					Исключение
						МассивСообщений.Добавить(ОписаниеОшибки());
					КонецПопытки;
				Иначе
					РегОб.Разблокировать();	
				КонецЕсли;	
			Исключение
				МассивСообщений.Добавить(ОписаниеОшибки());
			КонецПопытки;			
		КонецЦикла;	
	КонецЕсли;		
Иначе
	МассивСообщений.Добавить(СтрШаблон("Вид цен: ""%1"" не найден", ВидЦенИмя));
КонецЕсли;

Сообщение = Новый СообщениеПользователю;
Сообщение.Текст = СтрСоединить(МассивСообщений, Символы.ПС);
Сообщение.Сообщить();
```